@model GameLoggd.Controllers.AccountPageViewModel
@{
    var mode = (ViewData["Mode"] as string) ?? "login";
    var returnUrl = (ViewData["ReturnUrl"] as string) ?? string.Empty;
    ViewData["Title"] = "Account";
}

<div class="auth-page">
    <div class="auth-shell">
        <div class="auth-brand">
            <div class="auth-logo">GameLoggd</div>
            <div class="auth-tagline">Track, rate, and share your backlog.</div>
        </div>

        <div class="auth-card">
            <div class="auth-tabs" role="tablist" aria-label="Authentication">
                <button
                    type="button"
                    class="auth-tab @(mode == "login" ? "is-active" : "")"
                    data-auth-tab="login"
                    role="tab"
                    aria-selected="@(mode == "login" ? "true" : "false")">
                    Sign in
                </button>
                <button
                    type="button"
                    class="auth-tab @(mode == "register" ? "is-active" : "")"
                    data-auth-tab="register"
                    role="tab"
                    aria-selected="@(mode == "register" ? "true" : "false")">
                    Create account
                </button>
            </div>

            <div class="auth-body">
                <div class="auth-panel @(mode == "login" ? "is-active" : "")" data-auth-panel="login" role="tabpanel">
                    <h2>Welcome back</h2>
                    <p class="auth-sub">Sign in to continue.</p>

                    <form method="post" action="/account/login" class="auth-form">
                        @Html.AntiForgeryToken()
                        <input type="hidden" name="returnUrl" value="@returnUrl" />

                        <div class="auth-error">
                            @Html.ValidationSummary(excludePropertyErrors: true)
                        </div>

                        <div class="auth-field">
                            <label for="login_identifier">Email or username</label>
                            <input id="login_identifier" name="Identifier" value="@Model.Login.Identifier" placeholder="alexchen or alex@domain.com" />
                            <span class="auth-error">@Html.ValidationMessage("Identifier")</span>
                        </div>

                        <div class="auth-field">
                            <label for="login_password">Password</label>
                            <input id="login_password" name="Password" type="password" placeholder="••••••••" />
                            <span class="auth-error">@Html.ValidationMessage("Password")</span>
                        </div>

                        <div class="auth-row">
                            <label class="auth-check">
                                <input type="checkbox" name="RememberMe" value="true" />
                                <span>Remember me</span>
                            </label>
                            <a class="auth-link" href="#" tabindex="-1">Forgot password?</a>
                        </div>

                        <button class="auth-submit" type="submit">Sign in</button>

                        <div class="auth-foot">
                            <span>New here?</span>
                            <a class="auth-link" href="/account?mode=register" data-auth-switch="register">Create an account</a>
                        </div>
                    </form>
                </div>

                <div class="auth-panel @(mode == "register" ? "is-active" : "")" data-auth-panel="register" role="tabpanel">
                    <h2>Create your account</h2>
                    <p class="auth-sub">Join your friends and start logging.</p>

                    <form method="post" action="/account/register" class="auth-form">
                        @Html.AntiForgeryToken()
                        <input type="hidden" name="returnUrl" value="@returnUrl" />

                        <div class="auth-error">
                            @Html.ValidationSummary(excludePropertyErrors: true)
                        </div>

                        <div class="auth-field">
                            <label for="reg_username">Username</label>
                            <input id="reg_username" name="Username" value="@Model.Register.Username" placeholder="alexchen" />
                            <span class="auth-error">@Html.ValidationMessage("Username")</span>
                        </div>

                        <div class="auth-field">
                            <label for="reg_email">Email</label>
                            <input id="reg_email" name="Email" value="@Model.Register.Email" placeholder="alex@domain.com" />
                            <span class="auth-error">@Html.ValidationMessage("Email")</span>
                        </div>

                        <div class="auth-field">
                            <label for="reg_password">Password</label>
                            <input id="reg_password" name="Password" type="password" placeholder="Minimum 8 characters" />
                            <span class="auth-error">@Html.ValidationMessage("Password")</span>
                        </div>

                        <div class="auth-field">
                            <label for="reg_confirm">Confirm password</label>
                            <input id="reg_confirm" name="ConfirmPassword" type="password" placeholder="Repeat password" />
                            <span class="auth-error">@Html.ValidationMessage("ConfirmPassword")</span>
                        </div>

                        <button class="auth-submit" type="submit">Create account</button>

                        <div class="auth-foot">
                            <span>Already have an account?</span>
                            <a class="auth-link" href="/account?mode=login" data-auth-switch="login">Sign in</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>

    </div>
</div>

@section Scripts {
    <script src="~/js/auth.js" asp-append-version="true"></script>
}
