@model IEnumerable<GameLoggd.Models.Domain.UserList>

@{
    ViewData["Title"] = "My Lists";
}

<div class="page-container py-8 px-6 max-w-[1400px] mx-auto min-h-screen">
    <div class="flex flex-col md:flex-row justify-between items-center mb-10 gap-4">
        <h1 class="text-4xl md:text-5xl font-black text-white tracking-tighter uppercase drop-shadow-[0_0_15px_rgba(255,255,255,0.1)]">My Lists</h1>
        <a asp-action="Create" class="h-[42px] px-6 flex items-center gap-2 bg-primary text-background-dark font-bold uppercase tracking-widest rounded-lg hover:bg-white hover:text-black transition-all shadow-lg hover:shadow-primary/20">
            <span class="material-symbols-outlined text-[20px]">add</span>
            <span>New List</span>
        </a>
    </div>

    @if (Model.Any())
    {
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            @foreach (var list in Model)
            {
                <a asp-action="Details" asp-route-id="@list.Id" class="group block bg-white/5 border border-white/10 rounded-2xl overflow-hidden hover:border-primary/50 transition-all duration-300 shadow-lg hover:shadow-primary/10">
                    <!-- Preview Images (Collage style) -->
                    <div class="h-48 bg-black/40 relative">
                        @if (list.Items.Any())
                        {
                            <div class="grid grid-cols-4 h-full">
                                @foreach (var item in list.Items.Take(4))
                                {
                                    <div class="bg-center bg-cover border-r border-black/50 last:border-0 group-hover:scale-105 transition-transform duration-700" 
                                         style='background-image: url("@(string.IsNullOrEmpty(item.Game?.ImagePath) ? "/images/placeholder_game.jpg" : item.Game.ImagePath)");'></div>
                                }
                            </div>
                            <!-- Gradient Overlay -->
                            <div class="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent opacity-60"></div>
                        }
                        else
                        {
                            <div class="flex items-center justify-center h-full text-white/20 bg-background-dark">
                                <span class="material-symbols-outlined text-5xl group-hover:text-primary/50 transition-colors">format_list_bulleted</span>
                            </div>
                        }
                        
                         <div class="absolute bottom-4 left-4 right-4">
                            <h3 class="text-xl font-black text-white group-hover:text-primary transition-colors truncate drop-shadow-md">@list.Title</h3>
                             <div class="flex items-center gap-2 mt-1 text-xs font-mono font-bold text-white/60">
                                <span class="bg-white/10 px-2 py-0.5 rounded text-white">@list.Items.Count items</span>
                                <span>//</span>
                                <span>@list.UpdatedAt.ToString("MMM dd")</span>
                            </div>
                        </div>
                    </div>
                </a>
            }
        </div>
    }
    else
    {
         <div class="flex flex-col items-center justify-center py-20 bg-white/5 border border-white/10 border-dashed rounded-2xl text-center">
            <div class="size-20 bg-white/5 rounded-full flex items-center justify-center mb-6 border border-white/10">
                <span class="material-symbols-outlined text-4xl text-white/20">playlist_add</span>
            </div>
            <h2 class="text-2xl font-black text-white mb-2">No lists yet</h2>
            <p class="text-white/40 mb-8 max-w-md mx-auto">Create collections to organize your backlog, favorites, or specific genres.</p>
            <a asp-action="Create" class="px-8 py-3 bg-white/10 hover:bg-white/20 border border-white/10 rounded-lg text-white font-bold uppercase tracking-widest transition-all">Create your first list</a>
        </div>
    }
</div>
